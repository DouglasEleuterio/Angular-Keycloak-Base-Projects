<div class="card">
  <form (ngSubmit)="fetch()" [formGroup]="formGroup">
    <div class="p-fluid formgrid grid">
      <app-field class="field col-12 md:col-12" [noValidation]="true" page="solicitacao">
        <input appFieldRef pInputText type="text" formControlName="nome" maxlength="64" />
      </app-field>
      <div class="btn-pesquisa col-12 md:col-12">
        <button
          pButton
          pRipple
          (click)="clear()"
          type="button"
          [label]="'clear' | appTranslate : 'shared'"
          class="p-button-outlined"
        ></button>
        <button pButton pRipple type="submit" [label]="'search' | appTranslate : 'shared'"></button>
      </div>
    </div>
  </form>

  <p-table
    [(selection)]="selectedProduct"
    [value]="tableData"
    [lazy]="true"
    (onLazyLoad)="paginate($event)"
    [paginator]="true"
    [first]="pagination.first"
    [multiSortMeta]="multiSortMeta"
    [sortField]="sortField"
    [sortOrder]="sortOrder"
    [rows]="pagination.pageSize"
    [rowsPerPageOptions]="pagination.pageSizeOptions"
    [totalRecords]="pagination.totalRecords"
    sortMode="single"
    dataKey="id"
  >
    <ng-template pTemplate="header">
      <tr>
        <th scope="col" colspan="1" pSortableColumn="nome">
          {{'field.nome' | appTranslate:'servidor'}}
          <p-sortIcon field="nome"></p-sortIcon>
        </th>
        <th scope="col" colspan="1" pSortableColumn="ramal">
          {{'field.ramal' | appTranslate:'servidor'}}
          <p-sortIcon field="ramal"></p-sortIcon>
        </th>
        <th scope="col" colspan="1" pSortableColumn="matricula">
          {{'field.matricula' | appTranslate:'servidor'}}
          <p-sortIcon field="matricula"></p-sortIcon>
        </th>
        <th scope="col" colspan="1" pSortableColumn="cpf">
          {{'field.cpf' | appTranslate:'servidor'}}
          <p-sortIcon field="cpf"></p-sortIcon>
        </th>
        <th scope="col" colspan="1" pSortableColumn="cargo">
          {{'field.cargo' | appTranslate:'servidor'}}
          <p-sortIcon field="cargo"></p-sortIcon>
        </th>
        <th scope="col" colspan="1" pSortableColumn="funcao">
          {{'field.funcao' | appTranslate:'servidor'}}
          <p-sortIcon field="funcao"></p-sortIcon>
        </th>
        <th scope="col" colspan="1" pSortableColumn="unidade">
          {{'field.unidade' | appTranslate:'servidor'}}
          <p-sortIcon field="unidade"></p-sortIcon>
        </th>
        <th scope="col" colspan="1" class="actions">
          <span class="p-column-title bold"> {{'actions' | appTranslate:'shared'}}</span>
        </th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-entity let-expanded="expanded">
      <tr>
        <td colspan="1">
          <span class="p-column-title bold"> {{'field.nome' | appTranslate:'servidor'}}</span>
          <span> {{entity?.nome}} </span>
        </td>
        <td colspan="1">
          <span class="p-column-title bold"> {{'field.ramal' | appTranslate:'servidor'}}</span>
          <span> {{entity?.ramal}} </span>
        </td>
        <td colspan="1">
          <span class="p-column-title bold"> {{'field.matricula' | appTranslate:'servidor'}}</span>
          <span> {{entity?.servidor?.matricula}} </span>
        </td>
        <td colspan="1">
          <span class="p-column-title bold"> {{'field.cpf' | appTranslate:'servidor'}}</span>
          <span> {{entity?.cpf}} </span>
        </td>
        <td colspan="1">
          <span class="p-column-title bold"> {{'field.cargo' | appTranslate:'servidor'}}</span>
          <span> {{entity?.cargo}} </span>
        </td>
        <td colspan="1">
          <span class="p-column-title bold"> {{'field.funcao' | appTranslate:'servidor'}}</span>
          <span> {{entity?.funcao}} </span>
        </td>
        <td colspan="1">
          <span class="p-column-title bold"> {{'field.unidade' | appTranslate:'servidor'}}</span>
          <span> {{entity?.unidade}} </span>
        </td>
        <td colspan="1" class="actions">
          <span class="p-column-title bold"> {{'actions' | appTranslate:'shared'}}</span>
          <p-tableRadioButton [value]="entity" (click)="select()"></p-tableRadioButton>
        </td>
      </tr>
    </ng-template>
    <ng-template pTemplate="emptymessage">
      <tr>
        <td style="text-align: center" colspan="99">{{'no_records' | appTranslate:'shared'}}</td>
      </tr>
    </ng-template>
  </p-table>
  <div class="p-fluid formgrid grid">
    <div class="btn-pesquisa col-12 md:col-12">
      <p-button (click)="close()" label="{{'action.close' | appTranslate:'solicitacao'}}" styleClass="p-button-text"></p-button>
    </div>
  </div>
</div>
