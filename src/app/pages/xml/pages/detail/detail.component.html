<div class="grid">
  <div class="col-12">
    <div class="card">
      <div class="card-header">
        <h5>{{ 'title.detail' | appTranslate:'xml' }}</h5>
      </div>
      <p-divider align="center">
        <div class="inline-flex align-items-center">
          <i class="pi pi-user mr-2"></i>
          <b>Indentificação</b>
        </div>
      </p-divider>
      <div class="detail-body grid">
        <div class="col-3">
          <app-data-label title="{{'field.destinatario' | appTranslate:'xml'}}" [value]="entity?.nfe.inf.dest.xNome"></app-data-label>
        </div>
        <div class="col-3">
          <app-data-label
            title="{{'field.cnpj' | appTranslate:'xml'}}"
            [value]="entity?.nfe.inf.dest.cnpj | cnpjCpfPipe: true"
          ></app-data-label>
        </div>
        <div class="col-3">
          <app-data-label title="{{'field.remetente' | appTranslate:'xml'}}" [value]="entity?.nfe.inf.emit.xNome"></app-data-label>
        </div>
        <div class="col-3">
          <app-data-label
            title="{{'field.remetente_cnpj' | appTranslate:'xml'}}"
            [value]="entity?.nfe.inf.emit.cnpj | cnpjCpfPipe: true"
          ></app-data-label>
        </div>
      </div>
      <div class="detail-body grid">
        <div class="col-3">
          <app-data-label title="{{'field.numero' | appTranslate:'xml'}}" [value]="entity?.nfe.inf.ide.nNF"></app-data-label>
        </div>
        <div class="col-3">
          <app-data-label
            title="{{'field.dataemissao' | appTranslate:'xml'}}"
            [value]="entity?.nfe.inf.ide.dhEmi | date: 'dd/MM/yyyy'"
          ></app-data-label>
        </div>
        <div class="col-3">
          <app-data-label title="{{'field.natureza_operacao' | appTranslate:'xml'}}" [value]="entity?.nfe.inf.ide.natOp"></app-data-label>
        </div>
        <div class="col-3">
          <app-data-label
            title="{{'field.valor_total_nfe' | appTranslate:'xml'}}"
            [value]="entity?.nfe.inf.total.icmstot.vNF | thousandFormat"
          ></app-data-label>
        </div>
      </div>
      <p-divider align="center">
        <div class="inline-flex align-items-center">
          <i class="pi pi-money-bill mr-2"></i>
          <b>Impostos</b>
        </div>
      </p-divider>
      <div class="detail-body grid">
        <div *ngIf="entity?.nfe.inf.total.icmstot.vBC && entity?.nfe.inf.total.icmstot.vBC > 0 " class="col-3">
          <app-data-label
            title="{{'field.base_calculo_icms' | appTranslate:'xml'}}"
            [value]="entity?.nfe.inf.total.icmstot.vBC | thousandFormat"
          ></app-data-label>
        </div>
        <div *ngIf="entity?.nfe.inf.total.icmstot.vICMS && entity?.nfe.inf.total.icmstot.vICMS > 0 " class="col-3">
          <app-data-label
            title="{{'field.valor_icms' | appTranslate:'xml'}}"
            [value]="entity?.nfe.inf.total.icmstot.vICMS | thousandFormat"
          ></app-data-label>
        </div>
        <div *ngIf="entity?.nfe.inf.total.icmstot.vICMSDeson && entity?.nfe.inf.total.icmstot.vICMSDeson > 0 " class="col-3">
          <app-data-label
            title="{{'field.valor_icms_desonerado' | appTranslate:'xml'}}"
            [value]="entity?.nfe.inf.total.icmstot.vICMSDeson | thousandFormat"
          ></app-data-label>
        </div>
        <div *ngIf="entity?.nfe.inf.total.icmstot.vBCST && entity?.nfe.inf.total.icmstot.vBCST > 0 " class="col-3">
          <app-data-label
            title="{{'field.base_de_calculo_icms_st' | appTranslate:'xml'}}"
            [value]="entity?.nfe.inf.total.icmstot.vBCST | thousandFormat"
          ></app-data-label>
        </div>
        <div *ngIf="entity?.nfe.inf.total.icmstot.vST && entity?.nfe.inf.total.icmstot.vST > 0" class="col-3">
          <app-data-label
            title="{{'field.valor_icms_st' | appTranslate:'xml'}}"
            [value]="entity?.nfe.inf.total.icmstot.vST | thousandFormat"
          ></app-data-label>
        </div>
        <div *ngIf="entity?.nfe.inf.total.icmstot.vICMSUFRemet && entity?.nfe.inf.total.icmstot.vICMSUFRemet > 0 " class="col-3">
          <app-data-label
            title="{{'field.valor_icms_remet_uf' | appTranslate:'xml'}}"
            [value]="entity?.nfe.inf.total.icmstot.vICMSUFRemet | thousandFormat"
          ></app-data-label>
        </div>
        <div *ngIf="entity?.nfe.inf.total.icmstot.vICMSUFDest && entity?.nfe.inf.total.icmstot.vICMSUFDest > 0" class="col-3">
          <app-data-label
            title="{{'field.valor_icms_destino_uf' | appTranslate:'xml'}}"
            [value]="entity?.nfe.inf.total.icmstot.vICMSUFDest | thousandFormat"
          ></app-data-label>
        </div>
        <div *ngIf="entity?.nfe.inf.total.icmstot.vProd && entity?.nfe.inf.total.icmstot.vProd > 0" class="col-3">
          <app-data-label
            title="{{'field.valor_total_produtos' | appTranslate:'xml'}}"
            [value]="entity?.nfe.inf.total.icmstot.vProd | thousandFormat"
          ></app-data-label>
        </div>
        <div *ngIf="entity?.nfe.inf.total.icmstot.vFrete && entity?.nfe.inf.total.icmstot.vFrete > 0" class="col-3">
          <app-data-label
            title="{{'field.valor_frete' | appTranslate:'xml'}}"
            [value]="entity?.nfe.inf.total.icmstot.vFrete | thousandFormat"
          ></app-data-label>
        </div>
        <div *ngIf="entity?.nfe.inf.total.icmstot.vSeg && entity?.nfe.inf.total.icmstot.vSeg > 0" class="col-3">
          <app-data-label
            title="{{'field.valor_seguro' | appTranslate:'xml'}}"
            [value]="entity?.nfe.inf.total.icmstot.vSeg | thousandFormat"
          ></app-data-label>
        </div>
        <div *ngIf="entity?.nfe.inf.total.icmstot.vDesc && entity?.nfe.inf.total.icmstot.vDesc > 0" class="col-3">
          <app-data-label
            title="{{'field.valor_desconto' | appTranslate:'xml'}}"
            [value]="entity?.nfe.inf.total.icmstot.vDesc | thousandFormat"
          ></app-data-label>
        </div>
        <div *ngIf="entity?.nfe.inf.total.icmstot.vOutro && entity?.nfe.inf.total.icmstot.vOutro > 0" class="col-3">
          <app-data-label
            title="{{'field.valor_outras_despesas' | appTranslate:'xml'}}"
            [value]="entity?.nfe.inf.total.icmstot.vOutro | thousandFormat"
          ></app-data-label>
        </div>
        <div *ngIf="entity?.nfe.inf.total.icmstot.vIPI && entity?.nfe.inf.total.icmstot.vIPI > 0" class="col-3">
          <app-data-label
            title="{{'field.valor_ipi' | appTranslate:'xml'}}"
            [value]="entity?.nfe.inf.total.icmstot.vIPI | thousandFormat"
          ></app-data-label>
        </div>
        <div *ngIf="entity?.nfe.inf.total.icmstot.vIPI && entity?.nfe.inf.total.icmstot.vIPI > 0" class="col-3">
          <app-data-label
            title="{{'field.valor_ipi' | appTranslate:'xml'}}"
            [value]="entity?.nfe.inf.total.icmstot.vIPI | thousandFormat"
          ></app-data-label>
        </div>
        <div *ngIf="entity?.nfe.inf.total.icmstot.vPIS && entity?.nfe.inf.total.icmstot.vPIS > 0" class="col-3">
          <app-data-label
            title="{{'field.valor_pis' | appTranslate:'xml'}}"
            [value]="entity?.nfe.inf.total.icmstot.vPIS | thousandFormat"
          ></app-data-label>
        </div>
        <div *ngIf="entity?.nfe.inf.total.icmstot.vCOFINS && entity?.nfe.inf.total.icmstot.vCOFINS > 0" class="col-3">
          <app-data-label
            title="{{'field.valor_cofins' | appTranslate:'xml'}}"
            [value]="entity?.nfe.inf.total.icmstot.vCOFINS | thousandFormat"
          ></app-data-label>
        </div>
        <div *ngIf="entity?.nfe.inf.total.icmstot.vTotTrib && entity?.nfe.inf.total.icmstot.vTotTrib > 0" class="col-3">
          <app-data-label
            title="{{'field.valor_total_tributos' | appTranslate:'xml'}}"
            [value]="entity?.nfe.inf.total.icmstot.vTotTrib | thousandFormat"
          ></app-data-label>
        </div>
      </div>
      <p-divider align="center">
        <div class="inline-flex align-items-center">
          <i class="pi pi-shopping-cart mr-2"></i>
          <b>Produtos</b>
        </div>
      </p-divider>
      <div class="card flex justify-content-left">
<!--        <p-checkbox label="Destacar monofásico?" [(ngModel)]="isExibirMonofasico" [binary]="true" inputId="binary"></p-checkbox>-->
      </div>
      <p-table [value]="tableData" [scrollable]="true" scrollDirection="horizontal" scrollHeight="400px">
        <ng-template pTemplate="header">
          <tr>
            <th scope="col" colspan="1">{{ 'field.prod.codigo' | appTranslate:'xml' }}</th>
            <th scope="col" style="min-width: 350px" colspan="1">{{ 'field.prod.nome' | appTranslate:'xml' }}</th>
            <th scope="col" colspan="1">{{ 'field.prod.ncm' | appTranslate:'xml' }}</th>
            <th scope="col" colspan="1">{{ 'field.prod.cfop' | appTranslate:'xml' }}</th>
            <th scope="col" colspan="1">{{ 'field.prod.quantidade' | appTranslate:'xml' }}</th>
            <th scope="col" colspan="1">{{ 'field.prod.valor_unitario' | appTranslate:'xml' }}</th>
            <th scope="col" colspan="1">{{ 'field.prod.valor_total' | appTranslate:'xml' }}</th>
            <th scope="col" colspan="1">{{ 'field.prod.unidade_comercial' | appTranslate:'xml' }}</th>
            <th scope="col" colspan="1" pTooltip="{{'field.imposto.cofins.cst.desc' | appTranslate:'xml'}}">
              {{ 'field.imposto.cofins.cst.label' | appTranslate:'xml' }}
            </th>
            <th scope="col" colspan="1" pTooltip="{{'field.imposto.cofins.aliquota.desc' | appTranslate:'xml'}}">
              {{ 'field.imposto.cofins.aliquota.label' | appTranslate:'xml' }}
            </th>
            <th scope="col" colspan="1" pTooltip="{{'field.imposto.cofins.base_calculo.desc' | appTranslate:'xml'}}">
              {{ 'field.imposto.cofins.base_calculo.label' | appTranslate:'xml' }}
            </th>
            <th scope="col" colspan="1" pTooltip="{{'field.imposto.cofins.valor.desc' | appTranslate:'xml'}}">
              {{ 'field.imposto.cofins.valor.label' | appTranslate:'xml' }}
            </th>
            <th scope="col" colspan="1" pTooltip="{{'field.imposto.pis.cst.desc' | appTranslate:'xml'}}">
              {{ 'field.imposto.pis.cst.label' | appTranslate:'xml' }}
            </th>
            <th scope="col" colspan="1" pTooltip="{{'field.imposto.pis.aliquota.desc' | appTranslate:'xml'}}">
              {{ 'field.imposto.pis.aliquota.label' | appTranslate:'xml' }}
            </th>
            <th scope="col" colspan="1" pTooltip="{{'field.imposto.pis.base_calculo.desc' | appTranslate:'xml'}}">
              {{ 'field.imposto.pis.base_calculo.label' | appTranslate:'xml' }}
            </th>
            <th scope="col" colspan="1" pTooltip="{{'field.imposto.pis.valor.desc' | appTranslate:'xml'}}">
              {{ 'field.imposto.pis.valor.label' | appTranslate:'xml' }}
            </th>
          </tr>
        </ng-template>
        <ng-template let-prod pTemplate="body">
          <tr>
            <td [style]="isMonofasico(prod.prod.ncm, prod.imposto?.cofins?.cofinsaliq?.vCOFINS, entity?.nfe.inf.ide.dhEmi)" colspan="1">
              <span pTooltip="{{prod.prod.cProd}}"> {{ prod.prod.cProd }} </span>
            </td>
            <td [style]="isMonofasico(prod.prod.ncm, prod.imposto?.cofins?.cofinsaliq?.vCOFINS, entity?.nfe.inf.ide.dhEmi)" colspan="1">
              <span pTooltip="{{prod.prod.xProd}}"> {{ prod.prod.xProd }} </span>
            </td>
            <td [style]="isMonofasico(prod.prod.ncm, prod.imposto?.cofins?.cofinsaliq?.vCOFINS, entity?.nfe.inf.ide.dhEmi)" colspan="1">
              <span pTooltip="{{prod.prod.ncm}}"> {{ prod.prod.ncm }} </span>
            </td>
            <td [style]="isMonofasico(prod.prod.ncm, prod.imposto?.cofins?.cofinsaliq?.vCOFINS, entity?.nfe.inf.ide.dhEmi)" colspan="1">
              <span pTooltip="{{prod.prod.CFOP}}"> {{ prod.prod.CFOP }} </span>
            </td>
            <td [style]="isMonofasico(prod.prod.ncm, prod.imposto?.cofins?.cofinsaliq?.vCOFINS, entity?.nfe.inf.ide.dhEmi)" colspan="1">
              <span pTooltip="{{prod.prod.qCom}}"> {{ prod.prod.qCom }} </span>
            </td>
            <td [style]="isMonofasico(prod.prod.ncm, prod.imposto?.cofins?.cofinsaliq?.vCOFINS, entity?.nfe.inf.ide.dhEmi)" colspan="1">
              <span pTooltip="{{prod.prod.vUnCom}}"> {{ prod.prod.vUnCom | thousandFormat }} </span>
            </td>
            <td [style]="isMonofasico(prod.prod.ncm, prod.imposto?.cofins?.cofinsaliq?.vCOFINS, entity?.nfe.inf.ide.dhEmi)" colspan="1">
              <span pTooltip="{{prod.prod.vProd}}"> {{ prod.prod.vProd | thousandFormat }} </span>
            </td>
            <td [style]="isMonofasico(prod.prod.ncm, prod.imposto?.cofins?.cofinsaliq?.vCOFINS, entity?.nfe.inf.ide.dhEmi)" colspan="1">
              <span pTooltip="{{prod.prod.uCom}}"> {{ prod.prod.uCom }} </span>
            </td>
            <td [style]="isMonofasico(prod.prod.ncm, prod.imposto?.pis?.pisaliq?.vPIS, entity?.nfe.inf.ide.dhEmi)" colspan="1">
              <span> {{ prod.imposto?.cofins?.cofinsaliq?.CST }} </span>
            </td>
            <td [style]="isMonofasico(prod.prod.ncm, prod.imposto?.cofins?.cofinsaliq?.vCOFINS, entity?.nfe.inf.ide.dhEmi)" colspan="1">
              <span> {{ prod.imposto?.cofins?.cofinsaliq?.pCOFINS | percentualFormat }} </span>
            </td>
            <td [style]="isMonofasico(prod.prod.ncm, prod.imposto?.cofins?.cofinsaliq?.vCOFINS, entity?.nfe.inf.ide.dhEmi)" colspan="1">
              <span> {{ prod.imposto?.cofins?.cofinsaliq?.vBC | thousandFormat }} </span>
            </td>
            <td [style]="isMonofasico(prod.prod.ncm, prod.imposto?.cofins?.cofinsaliq?.vCOFINS, entity?.nfe.inf.ide.dhEmi)" colspan="1">
              <span> {{ prod.imposto?.cofins?.cofinsaliq?.vCOFINS | thousandFormat }} </span>
            </td>
            <td [style]="isMonofasico(prod.prod.ncm, prod.imposto?.pis?.pisaliq?.vPIS, entity?.nfe.inf.ide.dhEmi)" colspan="1">
              <span> {{ prod.imposto?.pis?.pisaliq?.cst }} </span>
            </td>
            <td [style]="isMonofasico(prod.prod.ncm, prod.imposto?.pis?.pisaliq?.vPIS, entity?.nfe.inf.ide.dhEmi)" colspan="1">
              <span> {{ prod.imposto?.pis?.pisaliq?.pPIS | percentualFormat }} </span>
            </td>
            <td [style]="isMonofasico(prod.prod.ncm, prod.imposto?.pis?.pisaliq?.vPIS, entity?.nfe.inf.ide.dhEmi)" colspan="1">
              <span> {{ prod.imposto?.pis?.pisaliq?.vBC | thousandFormat }} </span>
            </td>
            <td [style]="isMonofasico(prod.prod.ncm, prod.imposto?.pis?.pisaliq?.vPIS, entity?.nfe.inf.ide.dhEmi)" colspan="1">
              <span> {{ prod.imposto?.pis?.pisaliq?.vPIS | thousandFormat }} </span>
            </td>
          </tr>
        </ng-template>
      </p-table>
      <p-divider></p-divider>
      <div style="position: relative">
        <app-form-buttons [isDetail]="true" (onCancel)="cancel()"></app-form-buttons>
      </div>
    </div>
  </div>
</div>
