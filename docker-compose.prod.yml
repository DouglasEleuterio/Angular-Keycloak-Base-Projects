version: "3.7"

services:
  clinica-app:
    image: douglaseleuterioferreira/apps:clinica-app
    networks:
      - minha_rede
    #    ports:
    #      - 4201:80
    volumes:
      - clinica-app:/data
    deploy:
      labels:
        - traefik.enable=true
        - traefik.http.routers.clinica-app.rule=Host(`clemente-app.3ptecnologia.com.br`)
        - traefik.http.routers.clinica-app.entrypoints=websecure
        - traefik.http.routers.clinica-app.tls.certresolver=letsencryptresolver
        - traefik.http.routers.clinica-app.priority=1
        - traefik.http.routers.clinica-app.service=clinica-app
        - traefik.http.services.clinica-app.loadbalancer.server.port=80
        - traefik.http.services.clinica-app.loadbalancer.passHostHeader=true

volumes:
  clinica-app:
    external: true
    name: clinica-app

networks:
  minha_rede:
    name: minha_rede
    external: true
